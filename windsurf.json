{
  "version": 1,
  "rules": [
    {
      "name": "Load Project Context",
      "description": "Load Englishing project context for every new chat session",
      "condition": {
        "type": "always"
      },
      "action": {
        "type": "prepend_text",
        "text": "# Englishing Project Context\n\n## Project Architecture\n\nThe Englishing project has a modular structure with several key components:\n\n1. Core Modules:\n   - User Module (users, user_profiles)\n   - Article Module (courses, articles)\n\n2. Article Extensions:\n   - Article Word Module (sets, lists, translations)\n   - Article Sentence Module (sets, lists, translations)\n   - Article Double Sentence Module (sets, lists, translations)\n   - Article Expression Module (sets, lists, translations)\n   - Article Conversation Module (conversations, messages, translations)\n\n3. Standalone Modules:\n   - Word Module (words, meanings, pronunciations, translations, transliterations, connections)\n   - Sentence Module (sentences, pronunciations, translations, transliterations)\n   - Expression Module (expressions, meanings, pronunciations, translations, transliterations, connections)\n\n## Word Module Structure\n\nThe Word module is implemented using internachi/modular with the following structure:\n\n1. Models:\n   - Word - has many meanings, has one pronunciation\n   - WordMeaning - belongs to word, has one translation\n   - WordPronunciation - belongs to word\n   - WordMeaningTranslation - belongs to word meaning, has one transliteration\n   - WordMeaningTransliteration - belongs to word meaning translation\n   - WordConnection - pivot table connecting words (synonyms, antonyms)\n\n2. Key relationships:\n   - A word can have multiple meanings\n   - A word has only one pronunciation\n   - A meaning can have only one translation\n   - A translation can have only one transliteration\n   - Word connections use a pivot table with word_id_1, word_id_2, and type (string)\n\n3. Database tables:\n   - words(id, word, slug)\n   - word_meanings(id, word_id, meaning, slug)\n   - word_pronunciations(id, word_id, bn_pronunciation, hi_pronunciation, es_pronunciation)\n   - word_meaning_translations(id, word_meaning_id, bn_meaning, hi_meaning, es_meaning)\n   - word_meaning_transliterations(id, word_meaning_translation_id, bn_transliteration, hi_transliteration, es_transliteration)\n   - word_connections(id, word_id_1, word_id_2, type)\n\n## Design Patterns\n\n- Spatie Translatable used for JSON fields that need translation\n- One-to-many relationships between parent and child entities\n- Unique constraints to ensure only one translation per locale\n- Consistent naming conventions across modules\n- Strings used instead of enums in the database\n\n## UI Implementation\n\n- Frontend built with Tailwind CSS\n- Dark mode implemented across the application\n- Livewire used for reactive components\n- Alpine.js used for frontend interactivity\n- DataTables used for data display with server-side processing\n\n## Recent Changes\n\n- Added dark mode support to the entire application\n- Implemented theme toggle in the navigation bar\n- Updated Word Show and Index pages with dark mode styling\n- Fixed DataTable styling in dark mode using custom initialization\n- Added Livewire styles and scripts to the layout file\n\nPlease use this context to assist me with the Englishing project."
      }
    },
    {
      "name": "Load Project Files",
      "description": "Automatically load key project files",
      "condition": {
        "type": "always"
      },
      "action": {
        "type": "execute_commands",
        "commands": [
          "find /Users/polodev/sites/englishing/app-modules -name \"*.php\" | grep -E \"Word|Model\" | head -n 5"
        ]
      }
    },
    {
      "name": "Dark Mode Development",
      "description": "Provide context about dark mode implementation when discussing UI changes",
      "condition": {
        "type": "message_contains",
        "value": ["dark mode", "theme", "styling", "UI", "tailwind"]
      },
      "action": {
        "type": "prepend_text",
        "text": "Note about dark mode implementation in Englishing:\n\nDark mode is implemented using Tailwind CSS dark variant classes and Alpine.js for state management. The dark mode state is stored in localStorage as 'color-theme' and toggled via a button in the topnav component. All components should use dark: variants for consistent styling across the application."
      }
    },
    {
      "name": "Database Structure",
      "description": "Provide detailed database structure when discussing database-related topics",
      "condition": {
        "type": "message_contains",
        "value": ["database", "schema", "table", "model", "migration", "relation"]
      },
      "action": {
        "type": "prepend_text",
        "text": "# Englishing Database Structure\n\n## Words Module\n```\nwords(id, word, slug, pronunciation, phonetic, part_of_speech, source)   # pronunciation uses Spatie Translatable\nword_meanings(id, word_id, meaning, slug, source, display_order)   # English meaning only\nword_translations(id, word_id, meaning_id (nullable), translation, transliteration, locale, source) # unique(word_id, locale, slug)\nword_connections(word_id_1, word_id_2, type[synonyms, antonyms])  \n\nRelations:\n- word can have multiple meanings\n- word can have multiple translations\n- meaning can have only one translation\n- word_connections is a pivot table\n```\n\n## Sentence Module\n```\nsentences(id, sentence, slug, source, pronunciation) # pronunciation uses Spatie Translatable\nsentence_translations(id, sentence_id, translation, transliteration, slug, locale, source) # unique(sentence_id, locale, slug)\n\nRelations:\n- sentence can have only one translation for each locale\n```\n\n## Expression Module\n```\nexpressions(id, expression, type, slug)  \nexpression_meanings(id, expression_id, meaning, pronunciation) # pronunciation uses Spatie Translatable\nexpression_translations(id, expression_id, expression_meaning_id, translation, transliteration, slug, locale, source) # unique(expression_id, locale, slug)\nexpression_connections(expression_id_1, expression_id_2, type[synonyms, antonyms])  \n\nRelations:\n- expression can have multiple meanings\n- expression has only one pronunciation\n- expression can have multiple translations\n- meaning can have only one translation\n- translation can have only one transliteration\n- expression_connections is a pivot table\n```\n\n## Articles Module\n```\ncourses(id, user_id, title, content, slug, title_translation, content_translation, status) # title_translation, content_translation use Spatie Translatable\narticles(id, user_id, course_id, type, title, slug, content, display_order, status, excerpt, is_premium, scratchpad, title_translation, content_translation, excerpt_translation) # translations use Spatie Translatable\n```\n\n## Article Extensions\n\n### Article Word Module\n```\narticle_word_sets(id, article_id, display_order, title, content, column_order, static_content_1, static_content_2, title_translation, content_translation)\narticle_word_set_lists(id, article_word_set_id, display_order, word, slug, phonetic, pronunciation, parts_of_speech, static_content_1, static_content_2, meaning, example_sentence, example_expression, example_expression_meaning) # pronunciation uses Spatie Translatable\narticle_word_translations(id, article_word_set_list_id, word_translation, word_transliteration, example_sentence_translation, example_sentence_transliteration, example_expression_translation, example_expression_transliteration, locale, source, slug) # unique(article_word_set_list_id, locale, slug)\n\nRelations:\n- article_word_set has many article_word_set_lists\n- list word has many word translations but each locale has only one\n```\n\n### Article Sentence Module\n```\narticle_sentence_sets(id, article_id, display_order, title, content, title_translation, content_translation) # translations use Spatie Translatable\narticle_sentence_set_lists(id, article_sentence_set_id, sentence, pronunciation, slug, display_order) # pronunciation uses Spatie Translatable\narticle_sentence_translations(id, article_sentence_set_list_id, translation, transliteration, locale, slug) # unique(article_sentence_set_list_id, locale, slug)\n\nRelations:\n- article_sentence_set has many article_sentence_set_lists\n- list sentence has many translations but each locale has only one\n```\n\n### Article Double Sentence Module\n```\narticle_double_sentence_sets(id, article_id, display_order, title, content, title_translation, content_translation)\narticle_double_sentence_set_lists(id, article_double_sentence_set_id, sentence_1, sentence_1_slug, sentence_2, sentence_2_slug, display_order)\narticle_double_sentence_translations(id, article_double_sentence_set_list_id, sentence_1_translation, sentence_2_translation, sentence_1_transliteration, sentence_2_transliteration, locale, slug) # unique(article_double_sentence_set_list_id, locale, slug)\n\nRelations:\n- article_double_sentence_set has many article_double_sentence_set_lists\n- article_double_sentence_set_list has many article_double_sentence_translation but each locale has only one\n```\n\n### Article Expression Module\n```\narticle_expression_sets(id, article_id, display_order, title, content, title_translation, content_translation)\narticle_expression_set_lists(id, article_expression_set_id, expression, slug, display_order, meaning, example_sentence)\narticle_expression_translations(id, article_expression_set_list_id, slug, expression_translation, expression_transliteration, example_sentence_translation, example_sentence_transliteration, locale, source) # unique(article_expression_set_list_id, locale, slug)\n\nRelations:\n- article_expression_set has many article_expression_set_lists\n- list has many article_expression_translations however each locale has only one relation\n```\n\n### Article Conversation Module\n```\narticle_conversations(id, article_id, title, slug, content, title_translation, content_translation)\narticle_conversation_messages(id, article_conversation_id, speaker[string: speaker_1, speaker_2, speaker_3], message, slug, display_order)\narticle_conversation_message_translations(id, article_conversation_message_id, locale, slug)\n\nRelations:\n- conversation has many messages\n- message has many translation however each locale has only one translation\n```\n\n### Article Table Module\n```\narticle_tables(id, article_id, display_order, title, user_id, type)\narticle_table_columns(id, article_table_id, display_order, heading)\narticle_table_rows(id, article_table_id, display_order)\narticle_table_cells(id, article_table_row_id, article_table_column_id, content, content_slug, content_meaning, content_meaning_slug)\narticle_table_cell_translations(id, article_table_cell_id, bn_content_meaning, hi_content_meaning, es_content_meaning)\narticle_table_cell_transliterations(id, article_table_cell_translation_id, bn_transliteration, hi_transliteration, es_transliteration)\n```"
      }
    }
  ]
}
